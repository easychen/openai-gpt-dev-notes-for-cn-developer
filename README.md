åœ¨å†™äº†ä¸€å †åº”ç”¨ä»¥åï¼Œæˆ‘ä»¬æ‰“ç®—ä¼—ç­¹ä¸€ä¸ªGPTè¯¾ç¨‹ã€‚ä¹‹å‰æˆ‘ä»¥ä¸ºç°åœ¨GPTåº”ç”¨å·²ç»æ˜¯çº¢æµ·äº†ï¼Œä½†å®é™…æµ‹è¯•ä¸‹æ¥å‘ç°ï¼ŒGPTåº”ç”¨å…¶å®å¯ä»¥æ˜¯éæ ‡å‡†å“ã€‚ç‹¬æœ‰çš„æç¤ºè¯ã€ç‹¬æœ‰çš„çŸ¥è¯†åº“ã€ç‹¬æœ‰çš„å·¥ä½œæµéƒ½å¯ä»¥åšå‡ºç‹¬ä¸€æ— äºŒçš„GPTä½“éªŒã€‚åœ¨è¯¾ç¨‹ä¸­æˆ‘ä»¬å°†è®²è§£å¦‚ä½•è®¾è®¡ã€æ­å»ºå’Œå¼€å‘ä¸€ä¸ªä¸ä¼—ä¸åŒçš„å•†ä¸šGPTåº”ç”¨ã€‚<https://subdeer.cn/product/3>

# å¦‚ä½•å¿«é€Ÿå¼€å‘ä¸€ä¸ªOpenAI/GPTåº”ç”¨

> ä¸€ä¸ªå›½å†…å¼€å‘è€…çš„OpenAI/GPTçš„ç¬”è®°


æœ€è¿‘éƒ½åœ¨é—®ï¼Œäºæ˜¯å†™ä¸ªæ–‡æ¡£ã€‚æœ¬æ–‡å¸Œæœ›ç”¨å°½å¯èƒ½å°‘çš„å†…å®¹ï¼Œè®²æ¸…æ¥šå¼€å‘ä¸€ä¸ªOpenAI/GPTåº”ç”¨å¿…ç„¶ç”¨åˆ°çš„çŸ¥è¯†ï¼Œå†…å®¹ä¸»è¦èšç„¦åœ¨å…è´¹åº”ç”¨å¼€å‘ï¼Œå•†ä¸šåŒ–æ–¹æ¡ˆå¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼š[ã€Šååˆ†é’Ÿï¼Œç»™ä½ å¼€å‘çš„å…è´¹GPTåº”ç”¨åŠ ä¸Šæ”¶è´¹åŠŸèƒ½ã€‹](https://a.ftqq.com/2023/04/18/api2d-developer-program/)

æ¬¢è¿PRè¡¥å……ã€‚

### AI/Automationå¼€å‘äº¤æµç¾¤

1. ç”µæŠ¥ç¾¤ <https://t.me/+s-5piM3koEphNDY1>
1. å¾®ä¿¡ç¾¤ 

![](images/20230322123451.jpeg)


ç›®å½•
=================

* [å¦‚ä½•å¿«é€Ÿå¼€å‘ä¸€ä¸ªOpenAI/GPTåº”ç”¨](#å¦‚ä½•å¿«é€Ÿå¼€å‘ä¸€ä¸ªopenaigptåº”ç”¨)
   * [ChatGPT &amp;&amp; OpenAI çš„å…³ç³»](#chatgpt--openai-çš„å…³ç³»)
   * [OpenAI API æ¥å£èƒ½åšä»€ä¹ˆ](#openai-api-æ¥å£èƒ½åšä»€ä¹ˆ)
   * [chat completions æ¥å£å¦‚ä½•ä½¿ç”¨ï¼Ÿ](#chat-completions-æ¥å£å¦‚ä½•ä½¿ç”¨)
      * [Stream å‚æ•°](#stream-å‚æ•°)
      * [å…¶ä»–å‚æ•°](#å…¶ä»–å‚æ•°)
   * [Chat completions æ¥å£å¦‚ä½•è®¡è´¹ï¼Ÿ](#chat-completions-æ¥å£å¦‚ä½•è®¡è´¹)
   * [chat completions æ¥å£èƒ½åšä»€ä¹ˆ â‘ ](#chat-completions-æ¥å£èƒ½åšä»€ä¹ˆ-)
   * [chat completions æ¥å£èƒ½åšä»€ä¹ˆ â‘¡](#chat-completions-æ¥å£èƒ½åšä»€ä¹ˆ--1)
   * [å›½å†…æ˜¯å¦å¯ä»¥ä¸Šçº¿è¿è¥GPTç›¸å…³ä¸šåŠ¡ï¼Ÿ](#å›½å†…æ˜¯å¦å¯ä»¥ä¸Šçº¿è¿è¥gptç›¸å…³ä¸šåŠ¡)
   * [å¦‚ä½•è§£å†³å›½å†…ç”¨æˆ·æ— æ³•æ³¨å†ŒOpenAIè´¦å·ã€æ— æ³•è®¿é—®OpenAIæ¥å£çš„é—®é¢˜ï¼Ÿ](#å¦‚ä½•è§£å†³å›½å†…ç”¨æˆ·æ— æ³•æ³¨å†Œopenaiè´¦å·æ— æ³•è®¿é—®openaiæ¥å£çš„é—®é¢˜)
      * [æ³¨å†ŒOpenAI](#æ³¨å†Œopenai)
      * [è®¿é—®OpenAI API](#è®¿é—®openai-api)
      * [é€šè¿‡ç¬¬ä¸‰æ–¹æ¥å£è®¿é—®](#é€šè¿‡ç¬¬ä¸‰æ–¹æ¥å£è®¿é—®)
   * [å¦‚ä½•é¿å… OpenAI å°ç¦è´¦å· APIæƒé™](#å¦‚ä½•é¿å…-openai-å°ç¦è´¦å·-apiæƒé™)
   * [å¦‚ä½•çŸ¥é“ OpenAI æ¥å£çŠ¶æ€](#å¦‚ä½•çŸ¥é“-openai-æ¥å£çŠ¶æ€)


## ChatGPT && OpenAI çš„å…³ç³»

ChatGPT æ˜¯ OpenAI æ¨å‡ºçš„åº”ç”¨ï¼Œä½¿ç”¨çš„æ˜¯æœ€æ–°çš„æ¨¡å‹ï¼›è€Œ OpenAI å¼€æ”¾æ¥å£çš„æ¨¡å‹æ˜¯ gpt-3.5-turbo ï¼Œè¿™ä¸ªæ¨¡å‹æ¯” ChatGPT åº”ç”¨è¦ç¬¨ã€‚ä½† ChatGPT ç”¨çš„æœ€æ–°æ¨¡å‹æ²¡æœ‰æ¥å£ï¼Œåªèƒ½é€šè¿‡æ— å¤´æµè§ˆå™¨ç­‰æ–¹å¼æ¥ä½¿ç”¨ï¼ˆä¸ç¨³å®šï¼‰ã€‚

> æ›´æ–°ï¼šç›®å‰å·²ç»å¼€æ”¾äº† gpt-4 ï¼Œå½“å‰å°šæœªæä¾›å›¾ç‰‡è¾“å…¥æ¥å£ï¼Œä½¿ç”¨æ–¹å¼å’Œ gpt-3.5-turbo ä¸€è‡´ï¼Œåªéœ€è¦å°† model å‚æ•°æ›´æ¢ä¸º gpt-4 ï¼Œæ³¨æ„ gpt-4 çš„ max tokens ä¸º 8k ï¼ˆgpt-4-32k ä¸º 32kï¼‰ï¼ŒToken ä»·æ ¼æ˜¯ 3.5 çš„ 15~30 å€ã€‚

## OpenAI API æ¥å£èƒ½åšä»€ä¹ˆ

èƒ½åšçš„äº‹æƒ…å¾ˆå¤šï¼Œå¯ä»¥æŸ¥çœ‹[å®˜æ–¹æ–‡æ¡£](https://platform.openai.com/docs)ï¼Œä½†è¿™ä¸ªæ–‡æ¡£ä¸­å›½ç½‘ç»œç›®å‰æ— æ³•è®¿é—®ã€‚

![](images/20230307155346.png)

å…·ä½“æ¥è®²ï¼ŒOpenAI æ‰€æœ‰çš„å¯ç”¨çš„æ¥å£éƒ½åœ¨é‡Œè¾¹ï¼ŒåŒ…æ‹¬è¯­éŸ³è¯†åˆ«å’Œå›¾ç‰‡ç”Ÿæˆã€‚ä½†çœŸæ­£æ™ºèƒ½çš„å…¶å®åªæœ‰ `gpt-3.5-turbo`ï¼Œå› æ­¤åˆšå¼€å§‹ä¸ç”¨çœ‹å…¶ä»–å†…å®¹ã€‚

ç›®å‰å¤§å®¶çœ‹åˆ°çš„ç»å¤§éƒ¨åˆ†GPTç±»åº”ç”¨éƒ½æ˜¯ç”± `gpt-3.5-turbo` æ¨¡å‹çš„ `chat completions` å¯¹è¯è¡¥å…¨æ¥å£å®ç°çš„ã€‚

![](images/20230307150247.png)

## chat completions æ¥å£å¦‚ä½•ä½¿ç”¨ï¼Ÿ

å¯ä»¥é€šè¿‡å¾ˆå¤šæ–¹å¼æ¥ä½¿ç”¨ï¼Œæ¯”å¦‚ä½¿ç”¨å®˜æ–¹SDKï¼Œç¬¬ä¸‰æ–¹é¡¹ç›®ï¼Œä½†å…¶å®åªéœ€è¦ä¸€ä¸ªHTTPè¯·æ±‚å°±å¯ä»¥ã€‚ä»¥ä¸‹æ˜¯å®˜æ–¹æ–‡æ¡£ç»™å‡ºçš„ä¾‹å­ï¼š

```bash
curl https://api.openai.com/v1/chat/completions \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer YOUR_API_KEY' \
  -d '{
  "model": "gpt-3.5-turbo",
  "messages": [{"role": "user", "content": "Hello!"}]
}'
```

ä»é‡Œè¾¹å¯ä»¥çœ‹åˆ°ï¼Œéœ€è¦çš„ä¿¡æ¯æœ‰ï¼š

â‘  è¯·æ±‚åœ°å€ï¼š `https://api.openai.com/v1/chat/completions` è¿™ä¸ªåœ°å€ç›®å‰åœ¨å›½å†…å¤§éƒ¨åˆ†åœ°åŒºå·²ç»æ— æ³•è®¿é—®äº†ï¼Œåè¾¹ä¼šè®²è§£å†³åŠæ³• 

â‘¡ æœ€å¸¸ç”¨çš„æ¥å£å‚æ•°åŒ…æ‹¬ï¼š

1. model: å¿…å¡«ï¼Œå»ºè®®ä½¿ç”¨ `gpt-3.5-turbo`ï¼Œä¾¿å®œã€‚è®¡è´¹åè¾¹ä¼šè®²ã€‚
1. messages: AI è¿›è¡Œæé—®çš„é—®é¢˜æˆ–ä¿¡æ¯ã€‚
1. max_tokens: é€‰å¡«ï¼ŒæŒ‡å®šç”Ÿæˆå›ç­”çš„æœ€å¤§Tokenæ•°ã€‚
1. stream: é€‰å¡«ï¼Œæ˜¯å¦æŒ‰æµçš„æ–¹å¼å‘é€å†…å®¹ã€‚

å…¶ä¸­ messagesçš„æ ¼å¼ä¸ºï¼š`{"role","content"}`ã€‚ä¸€èˆ¬ç”¨ `user` å‘é€ç”¨æˆ·é—®é¢˜ï¼›`system` å‘é€ç»™æ¨¡å‹æç¤ºä¿¡æ¯ã€‚

ä¾‹å¦‚ï¼š
```json
[
  {"role": "system", "content": "You are a helpful assistant that translates English to French."},
  {"role": "user", "content": "Translate the following English text to French: {text}"}
]
```
çŸ¥é“äº†è¿™äº›åŸºæœ¬å°±å¯ä»¥è·‘é€šGPTæµç¨‹äº†ï¼Œå…¶ä»–roleå¯ä»¥ç¨åä¼˜åŒ–æ—¶æ¥åšã€‚

### Stream å‚æ•°

è¿™é‡Œå•ç‹¬è¯´ä¸€ä¸‹ stream å‚æ•°ï¼Œå½“å®ƒè®¾ç½®ä¸º true æ—¶ï¼ŒAPI ä¼šä»¥ SSEï¼ˆ Server Side Event ï¼‰æ–¹å¼è¿”å›å†…å®¹ã€‚

SSE æœ¬è´¨ä¸Šè¿˜æ˜¯ HTTP åè®®ï¼Œåªä¸è¿‡å®ƒæ˜¯ä¸€ä¸ªé•¿é“¾æ¥ï¼Œå…ˆè¾“å‡ºä¸€ä¸ª `header("Content-Type: text/event-stream")` ï¼Œ ç„¶åæŒç»­ä¸æ–­åœ°è¾“å‡ºå†…å®¹ç›´åˆ°å®Œæˆã€‚å¦‚æœä¸æ˜¯åšå®æ—¶èŠå¤©ï¼Œå»ºè®®ç›´æ¥falseæ‰ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¼€å¯stream åï¼Œå°†ä¸ä¼šè¿”å› usage ä¿¡æ¯ï¼Œè¿™å¯¹ç²¾å‡†è®¡è´¹æœ‰å½±å“

```
{"id":"chatcmpl-6s3hNohxOliHi8zR7m5UTrLm4cWWc","object":"chat.completion.chunk","created":1678341949,"model":"gpt-3.5-turbo-0301","choices":[{"delta":{"content":"æˆ‘"},"index":0,"finish_reason":null}]}
{"id":"chatcmpl-6s3hNohxOliHi8zR7m5UTrLm4cWWc","object":"chat.completion.chunk","created":1678341949,"model":"gpt-3.5-turbo-0301","choices":[{"delta":{"content":"æ²¡æœ‰"},"index":0,"finish_reason":null}]}
{"id":"chatcmpl-6s3hNohxOliHi8zR7m5UTrLm4cWWc","object":"chat.completion.chunk","created":1678341949,"model":"gpt-3.5-turbo-0301","choices":[{"delta":{"content":"å½“å‰"},"index":0,"finish_reason":null}]}
{"id":"chatcmpl-6s3hNohxOliHi8zR7m5UTrLm4cWWc","object":"chat.completion.chunk","created":1678341949,"model":"gpt-3.5-turbo-0301","choices":[{"delta":{"content":"æ—¥æœŸ"},"index":0,"finish_reason":null}]}
{"id":"chatcmpl-6s3hNohxOliHi8zR7m5UTrLm4cWWc","object":"chat.completion.chunk","created":1678341949,"model":"gpt-3.5-turbo-0301","choices":[{"delta":{"content":"çš„"},"index":0,"finish_reason":null}]}
{"id":"chatcmpl-6s3hNohxOliHi8zR7m5UTrLm4cWWc","object":"chat.completion.chunk","created":1678341949,"model":"gpt-3.5-turbo-0301","choices":[{"delta":{"content":"å®"},"index":0,"finish_reason":null}]}
{"id":"chatcmpl-6s3hNohxOliHi8zR7m5UTrLm4cWWc","object":"chat.completion.chunk","created":1678341949,"model":"gpt-3.5-turbo-0301","choices":[{"delta":{"content":"æ—¶"},"index":0,"finish_reason":null}]}
{"id":"chatcmpl-6s3hNohxOliHi8zR7m5UTrLm4cWWc","object":"chat.completion.chunk","created":1678341949,"model":"gpt-3.5-turbo-0301","choices":[{"delta":{"content":"ä¿¡æ¯"},"index":0,"finish_reason":null}]}
```


### å…¶ä»–å‚æ•°

æ¥å£çš„å…¶ä»–å‚æ•°å¯ä»¥çœ‹[å®˜æ–¹æ–‡æ¡£](https://platform.openai.com/docs/api-reference/chat)ï¼Œè®¿é—®ä¸äº†çš„åŒå­¦å¯ä»¥çœ‹æˆ‘åšçš„æˆªå›¾ã€‚

![](images/20230307143748.png)
![](images/20230307143831.png)

## Chat completions æ¥å£å¦‚ä½•è®¡è´¹ï¼Ÿ

`chat completions` æ¥å£æŒ‰ token è®¡è´¹ï¼Œæœ‰ä¸€ä¸ªä¸“é—¨çš„ç®—æ³•æ¥è®¡ç®— tokenã€‚è¾“å…¥å’Œè¾“å‡ºå…¨éƒ¨éƒ½ä¼šè®¡å…¥åˆ° token é‡Œè¾¹ï¼Œåœ¨ `chat completions` æ¥å£çš„ `usage` é‡Œè¾¹ä¼šæœ‰å…·ä½“æ¶ˆè€—çš„ token æ•°ã€‚

å¦‚æœä½ è¦è‡ªå·±è®¡ç®—ï¼Œå¯ä»¥ç”¨è¿™ä¸ª[åœ¨çº¿è¡¨å•](https://tiktokenizer.vercel.app)ï¼Œç¨‹åºè®¡ç®—å¯ä»¥çœ‹çœ‹è¿™ä¸¤ä¸ªé¡¹ç›®ï¼š

1. https://github.com/dqbd/tiktokenizer
2. https://github.com/openai/tiktoken


é™¤äº† `gpt-3.5-turbo` æ¨¡å‹çš„ `chat completions` æ¥å£ï¼Œè¿˜æœ‰ `text-davinci-003` æ¨¡å‹çš„ `text completions` æ¥å£å¯ä»¥ç”¨ï¼Œä½†æ˜¯ä»·æ ¼æ›´è´µï¼Œæ•ˆæœæ›´å·® ğŸ¤£

ä½ å¯ä»¥åœ¨ <https://openai.com/pricing> æŸ¥è¯¢åˆ°ä»·æ ¼ï¼Œä»¥ä¸‹æ˜¯3æœˆä¸­æ—¬çš„å®šä»·
 
| Model | Usage |
| --- | --- |
| gpt-3.5-turbo (ChatGPT) | $0.002 / 1K tokens |
| Davinci (InstructGPT) | $0.0200 / 1K tokens |
| Ada (InstructGPT) | $0.0004 / 1K tokens |
| Babbage (InstructGPT) | $0.0005 / 1K tokens |
| Curie (InstructGPT) | $0.0020 / 1K tokens |


## chat completions æ¥å£èƒ½åšä»€ä¹ˆ â‘ 

è™½ç„¶ `chat completions` çœ‹èµ·æ¥åƒæ˜¯ä¸€ä¸ªèŠå¤©æ¥å£ï¼Œä½†æ¥å£è®¾è®¡ä¸Šå¹¶æ²¡æœ‰ä¸ºèŠå¤©ä¼˜åŒ–ï¼Œå› ä¸ºè¿™ä¸ªæ¥å£æ˜¯è®°ä¸ä½ä¸Šä¸‹æ–‡çš„ã€‚

ä¸ºäº†è®©å¯¹è¯å…·æœ‰è¿ç»­æ€§ï¼Œæˆ‘ä»¬æ¯æ¬¡è¯·æ±‚éœ€è¦å¸¦ä¸Šä¸Šæ¬¡çš„èŠå¤©è®°å½•ã€‚æœ‰å¤šç§æ–¹å¼è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªæ˜¯ç›´æ¥åœ¨messageså‚æ•°ä¸­åŠ ä¸ŠèŠå¤©è®°å½•ã€‚å…¶ä¸­ï¼ŒGPTè¿”å›çš„å†…å®¹ç”¨ `assistant` roleã€‚

```json
[
     {"role": "system", "content": "You are a helpful assistant."},
     {"role": "user", "content": "Who won the world series in 2020?"},
     {"role": "assistant", "content": "The Los Angeles Dodgers won the World Series in 2020."},
     {"role": "user", "content": "Where was it played?"}
 ]
```

å¦ä¸€ä¸ªæ–¹å¼æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼Œæ¯”å¦‚`chatgpt-api`ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨å¸®ä½ å‘é€èŠå¤©è®°å½•ï¼ˆé€šè¿‡æŒ‡å®šå¯¹è¯çš„`parentMessageId`å®ç°ï¼‰ï¼š

1. <https://github.com/transitive-bullshit/chatgpt-api>

![](images/20230307150942.png)

åœ¨åŠ ä¸Šå¯¹è¯è®°å½•åï¼Œ`chat completions` æ¥å£å°±å¯ä»¥åˆ¶ä½œä¸€ä¸ªçœ‹èµ·æ¥æœ‰æ™ºèƒ½çš„èŠå¤©åº”ç”¨äº†ã€‚



> å¦‚æœä½ è¦åœ¨å›½å†…è¿è¥èŠå¤©æœºå™¨äººä¹‹ç±»çš„è¯ï¼Œè¯·è®°å¾—å°†å†…å®¹é€šè¿‡æ–‡æœ¬å†…å®¹å®¡æ ¸æ¥å£è¿›è¡Œå®¡æ ¸ï¼Œå¦åˆ™å¾ˆå¯èƒ½å¯¼è‡´è¢«å°ã€‚

## chat completions æ¥å£èƒ½åšä»€ä¹ˆ â‘¡

å…¶å®é™¤äº†å¯¹è¯ï¼ŒGPTæœ‰å¾ˆå¼ºçš„å†…å®¹æ€»ç»“å½’çº³èƒ½åŠ›ï¼Œå¦å¤–ç”±äºå®ƒèƒ½ç†è§£å†…å®¹ç»“æ„ï¼ŒåŒæ—¶æœ¬èº«åˆæ˜¯è¯­è¨€æ¨¡å‹ï¼Œå› æ­¤å¯¹ç»“æ„åŒ–ç¿»è¯‘å¾ˆæ“…é•¿ã€‚

æ¯”å¦‚ï¼Œæˆ‘ç»å¸¸ç”¨å®ƒç¿»è¯‘JSONå’ŒMarkdownï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹æ•ˆæœå¾ˆå¥½ã€‚åœ¨è‡ªç”¨ä½“éªŒå¾ˆå¥½çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶åˆ¶ä½œä¸ºåº”ç”¨ã€‚

![](images/20230307151810.png)

åº”ç”¨å¼€å‘éå¸¸ç®€å•ï¼Œæˆ‘åªç”¨ä¸€å¤©æ—¶é—´å¼€å‘äº†[AiBox](https://ai.ftqq.com/)ï¼ŒæŒ‰åŸºæœ¬çš„webåº”ç”¨å¼€å‘å°±å¯ä»¥ï¼Œé‡ç‚¹è¯´å‡ ä¸ªç»†èŠ‚ï¼š

1. æç¤ºè¯ï¼šç›´æ¥æŠŠæç¤ºè¯ä»¥ system çš„ role æäº¤å°±å¯ä»¥ã€‚
1. Keyé—®é¢˜ï¼šå¼€å‘è€…çš„Keyè‚¯å®šæ˜¯ä¸å¤Ÿç”¨çš„ï¼Œå› æ­¤ä¸€èˆ¬ä¼šè®©ä½¿ç”¨è€…å¡«å†™è‡ªå·±çš„Keyã€‚ä½†æ˜¯å›½å†…ç”¨æˆ·æ²¡æœ‰æµ·å¤–æ‰‹æœºå·ï¼Œæ— æ³•ç”³è¯·key;ç”³è¯·ä¸‹æ¥APIç›´æ¥è®¿é—®ä¹Ÿä¸é€šï¼Œè§£å†³æ–¹æ¡ˆæœ‰å‡ ç§ï¼Œåè¾¹ä¸“é—¨è®²
1. Tokenè®¡ç®—å’Œé™åˆ¶é—®é¢˜ï¼šå¦‚æœä½¿ç”¨è€…ç”¨è‡ªå·±çš„Keyï¼Œä¸ºäº†æå‡ä½“éªŒï¼Œæˆ‘ä»¬å¯ä»¥æä¾›ä¸€ä¸ªTokenè®¡ç®—ï¼Œè®©ç”¨æˆ·çŸ¥é“è‡ªå·±çš„ä¼šèŠ±å¤šå°‘é’±ã€‚å¦å¤–å¦‚æœä½ æ²¡æœ‰ç”¨ç¬¬ä¸‰æ–¹é‚£ä¸ªåº“æ¥åˆ†æ‹†ï¼Œé‚£ä¹ˆä¸€æ¬¡è¯·æ±‚çš„å†…å®¹ä¸è¦è¶…è¿‡ max_tokens çš„é™åˆ¶ã€‚è¿™ä¸ªå€¼ä¸€èˆ¬æ˜¯ 4096ã€‚

## å›½å†…æ˜¯å¦å¯ä»¥ä¸Šçº¿è¿è¥GPTç›¸å…³ä¸šåŠ¡ï¼Ÿ

å°±ç›®å‰è€Œè¨€ï¼Œæˆ‘äº†è§£åˆ°çš„æƒ…å†µæ˜¯å¤§éƒ¨åˆ†ä¼ä¸šæ²¡æœ‰æ”¶åˆ°æ˜ç¡®ç¦æ­¢è¿è¥GPTç›¸å…³ä¸šåŠ¡çš„é€šçŸ¥ï¼Œä½†åœ¨å›½å†…è¿è¥è¦åšå¥½å†…å®¹å®‰å…¨ï¼Œæ¯”å¦‚å¯¹æ¥å£è¿”å›çš„å†…å®¹å†è¿‡ä¸€å±‚å†…å®¹å®¡æ ¸ã€‚å¦åˆ™å¦‚æœåœ¨åº”ç”¨ä¸­å‡ºç°è¿è§„å†…å®¹è¢«ä¸¾æŠ¥ï¼Œå°±ä¼šè¢«å°ç¦ã€‚

ä½†è¿™æ˜¯ä¸€ä¸ªéšæ—¶å¯èƒ½å˜åŒ–çš„æƒ…å†µï¼Œæˆ‘ä»¬å‡†å¤‡äº†[ä¸€ä¸ªissue](https://github.com/easychen/openai-api-proxy/issues/11)ä¾›å¤§å®¶åé¦ˆã€‚

## å¦‚ä½•è§£å†³å›½å†…ç”¨æˆ·æ— æ³•æ³¨å†ŒOpenAIè´¦å·ã€æ— æ³•è®¿é—®OpenAIæ¥å£çš„é—®é¢˜ï¼Ÿ

ä¸¤ä¸ªæ€è·¯ï¼Œä¸€ä¸ªæ˜¯ç»•é“æµ·å¤–å»æ³¨å†Œï¼Œé€šè¿‡ä»£ç†ä½¿ç”¨æœåŠ¡ï¼›å¦ä¸€ä¸ªæ˜¯ç›´æ¥ä½¿ç”¨ç¬¬ä¸‰æ–¹ä»£ç†APIæœåŠ¡ã€‚å‰è€…å¯ä»¥æš‚æ—¶è§£å†³å½“å‰çš„é—®é¢˜ï¼›åè€…æ›´æ–¹ä¾¿çœå¿ƒã€‚

### æ³¨å†ŒOpenAI

1. å‡†å¤‡ä¸€ä¸ªæµ·å¤–çš„ç½‘ç»œ
1. å‡†å¤‡ä¸€ä¸ªæµ·å¤–æ‰‹æœºå·æ¥æ¥æ”¶éªŒè¯çŸ­ä¿¡ï¼Œå¯ä»¥ç”¨[æµ·å¤–è™šæ‹Ÿå·ç ](https://sms-activate.org/?ref=4207095)

æ³¨å†Œå®Œæˆåï¼Œè¿›å…¥[APIé¡µé¢](https://openai.com/api/) åˆ›å»ºKeyï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨äº†ã€‚

è¿™ä¸ªæ–¹æ¡ˆç›®å‰å¯è¡Œï¼Œæ˜¯å› ä¸ºOpenAIç»™æ¯ä¸ªæ–°ç”¨æˆ·æä¾›äº†18ç¾é‡‘çš„å…è´¹é¢åº¦ã€‚ä½†æ˜¯ä¸€æ—¦ä¸å†æä¾›ï¼Œå°±ä¼šé¢ä¸´å……å€¼çš„é—®é¢˜ã€‚ç›®å‰OpenAIä¸æ¥å—ä¸­å›½ä¿¡ç”¨å¡ï¼Œå› æ­¤è¿˜å¿…é¡»å‡†å¤‡ä¸€ä¸ªæµ·å¤–ä¿¡ç”¨å¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¦é•¿ä¹…ç¨³å®šçš„ä½¿ç”¨ï¼Œå¿…é¡»æœ‰æµ·å¤–ä¿¡ç”¨å¡ã€‚

ä»¥å‰æœ‰è´¢ä»˜é€šçš„æµ·å¤–è™šæ‹Ÿä¿¡ç”¨å¡ï¼Œåæ¥æœåŠ¡ä¸‹çº¿äº†ã€‚æœ€è¿‘çœ‹äº†ä¸‹ï¼Œå¾ˆå¤š500RMBèµ·ï¼Œè¿˜åªæ”¯æŒç”µå•†ç½‘ç«™ï¼Œæ„Ÿè§‰ä¸å¤ªé è°± ğŸ¤£

### è®¿é—®OpenAI API

3æœˆ3æ—¥å¼€å§‹ï¼Œå›½å†…å¤§éƒ¨åˆ†ç½‘ç»œä¸å†èƒ½ç›´æ¥è®¿é—® OpenAI æ¥å£ã€‚

![](images/20230307153602.png)

å› æ­¤ä½ éœ€è¦æ¶è®¾ä»£ç†æ¥è®¿é—®OpenAI æ¥å£ã€‚ä½ å¯ä»¥å°†æ•´ä¸ªæœåŠ¡å™¨ä»£ç†åˆ°æµ·å¤–ç½‘ç»œï¼Œæˆ–è€…åªæ˜¯ç®€å•çš„é€šè¿‡ Cloudflare æˆ–è€… è…¾è®¯äº‘å‡½æ•°æ¥éƒ¨ç½²APIä»£ç†ã€‚

å¦‚æœä½ å‡†å¤‡ä½¿ç”¨è…¾è®¯äº‘å‡½æ•°ï¼Œ[æ•™ç¨‹å¯ä»¥çœ‹è¿™é‡Œ](https://github.com/easychen/openai-api-proxy/blob/master/FUNC.md)

![](images/20230307155459.png)

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè…¾è®¯äº‘APIä»£ç†ä¼šå°†é•¿è¿æ¥å†…å®¹ä¸€æ¬¡æ€§è¿”å›ï¼Œå› æ­¤æµå¼ä½“éªŒä¸æ˜æ˜¾ã€‚å½“ç„¶ï¼Œæœ‰åŒå­¦è¯´è…¾è®¯äº‘çš„ ApiGateway ç›´æ¥å°±èƒ½ä»£ç†ï¼Œä½†æˆ‘æµ‹è¯•äº†ä¸‹æ²¡æˆåŠŸã€‚

### é€šè¿‡ç¬¬ä¸‰æ–¹æ¥å£è®¿é—®

å¦‚æœä½ æä¸å®šæµ·å¤–æ‰‹æœºå·å’Œä¿¡ç”¨å¡ï¼Œæˆ–è€…è‡ªå·±ä¸æƒ³æ¶è®¾ä»£ç†ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘ç”¨åƒ[API2D](https://api2d.com)è¿™æ ·çš„ç¬¬ä¸‰æ–¹ä»£ç†APIã€‚

ä¸»è¦çš„ä¼˜ç‚¹ï¼š

1. åŸºæœ¬å…¼å®¹åŸæœ‰æ¥å£ï¼Œåªéœ€è¦æ”¹ä¸‹ API endpoint å’Œ Key
1. æ¥å£å›½å†…ç›´æ¥å¯ä»¥è®¿é—®ï¼Œæ— éœ€æ¶è®¾ä»£ç†
1. æ”¯æŒå¾®ä¿¡å’Œå›½å†…å¡å……å€¼ï¼Œæä¾›æœ€å°0.5ç¾é‡‘/3.5äººæ°‘å¸çš„æµ‹è¯•æ¡£ä½ï¼ŒGitHubæ³¨å†Œè¿˜æœ‰50ç‚¹å…è´¹é¢åº¦è¯•ç”¨
1. æ·»åŠ  moderation å‚æ•°ï¼Œå¯ä»¥è¿”å›å†…å®¹å®¡æ ¸ç»“æœï¼Œçœäº‹
1. æ¨èå¯ä»¥è·å¾—ç‚¹æ•°ï¼Œè¿™é‡Œæ˜¯æˆ‘çš„[æ¨èé“¾æ¥](https://api2d.com/r/186008)

ç¼ºç‚¹ï¼š

1. ~~ä¸æ”¯æŒ stream å‚æ•°~~ï¼Œå·²ç»æ”¯æŒ stream
1. ç›®å‰åªæ”¯æŒ chat å’Œ embeddings æ¥å£
1. ä»·æ ¼æ¯”å®˜æ–¹ç•¥é«˜ï¼Œå¤§æ¦‚1.5å€ï¼Œå½“ç„¶è¿™ä¸ªåŒ…å«äº†æµé‡ä¸­è½¬çš„æˆæœ¬

> åˆ©ç›Šç›¸å…³ï¼šapi2dè¿™ä¸ªäº§å“æ˜¯ä½œè€…åŠ æ‹¿å¤§çš„æœ‹å‹åšçš„ï¼Œè€Œä¸”ä½œä¸ºæ—©æœŸç”¨æˆ·ä¸€ç›´åœ¨é‡åº¦ä½¿ç”¨

## å¦‚ä½•é¿å… OpenAI å°ç¦è´¦å· APIæƒé™

æœ€è¿‘å¾—åˆ°åé¦ˆï¼Œå¾ˆå¤šæ¶è®¾é¦™æ¸¯ä»£ç†çš„è´¦å·æ”¶åˆ°äº†é‚®ä»¶è¢«ç¦ç”¨äº†æƒé™ã€‚ç»è¿‡ç¾¤é‡Œå¤§å®¶çš„è®¨è®ºï¼Œæ€»ç»“çš„ç»éªŒå¦‚ä¸‹ï¼š

1. ä¸è¦ä½¿ç”¨ OpenAI ä¸æœåŠ¡åœ°åŒºçš„ä»£ç†
1. è™šæ‹Ÿæµ·å¤–æ‰‹æœºå·æ›´å¯èƒ½å¯¼è‡´è´¦å·è¢«å°
1. ç»‘å®šä¿¡ç”¨å¡å¯ä»¥å¤§å¹…æå‡è´¦å·å­˜æ´»ç‡

## å¦‚ä½•çŸ¥é“ OpenAI æ¥å£çŠ¶æ€

OpenAIå®˜æ–¹æä¾›äº†ä¸€ä¸ª[çŠ¶æ€é¡µ](https://status.openai.com/)ï¼Œè™½ç„¶å°æ•…éšœä¸æ€ä¹ˆæ˜¾ç¤ºï¼Œä½†å¤§é¢ç§¯å®•æœºæ—¶èƒ½çœ‹åˆ°å…¬å‘Šã€‚

![image](https://user-images.githubusercontent.com/1294760/223604103-4093bdd4-4455-4f55-a294-fb7003325000.png)








